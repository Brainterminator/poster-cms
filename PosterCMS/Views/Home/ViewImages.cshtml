@model List<string>
@{
    var baseUrl = $"{Context.Request.Scheme}://{Context.Request.Host}/uploads/";
}

<h2>Uploaded Images</h2>

@if (Model.Count == 0)
{
    <p>No images uploaded yet.</p>
}
else
{
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px;">
        @foreach (var fileName in Model)
        {
            var imageUrl = baseUrl + fileName;
            <div style="text-align: center; border: 1px solid #ccc; padding: 10px;">
                <img src="@imageUrl" alt="@fileName" style="max-width: 100%; height: auto;" />
                <p style="word-break: break-all;">@imageUrl</p>
                <button onclick="copyToClipboard('@imageUrl')">Copy Link</button>
            </div>
        }
    </div>
}

@section Scripts {
    <script>
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert("Copied to clipboard!");
            }, (err) => {
                alert("Failed to copy: " + err);
            });
        }
    </script>
}
