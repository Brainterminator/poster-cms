@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    var pagesize = Context.Request.Cookies["PageSize"];
}

@model PosterModel
<div class="embedded-scope @(pagesize == "A3" ? "landscape" : "portrait")">

    <body>
        <main>
            <h1>@Model.Title</h1>
            <article>
                <h1>@Model.Sub1</h1>
                <p>@Model.Text1</p>
                <img src="@Model.ImageUrl1">
            </article>
            <article>
                <h1>@Model.Sub2</h1>
                <p>@Model.Text2</p>
                <img src="@Model.ImageUrl2">
            </article>
            <article>
                <h1>@Model.Sub3</h1>
                <p>@Model.Text3</p>
                <img src="@Model.ImageUrl3">
            </article>
        </main>
    </body>
</div>
<div class="poster-bot @(pagesize == "A3" ? "a3-page" : "a4-page")" id="poster-id">
    <div>
        <input type="button" value="Print" class="button" onclick="window.print();">
        <input type="button" value="Export" class="button"
            onclick="window.location.href='/Poster/ExportPoster@(pagesize == "A3" ? "A3" : "")?id=@Model.ID'">
    </div>
    <a class="button" asp-area="" asp-controller="Poster" asp-action="Edit" asp-route-id=@Model.ID>Edit</a>
</div>

@section Scripts {
<script>
    document.addEventListener('pageSizeChanged', function(e) {
        const newPageSize = e.detail.pageSize;
        const scope = document.querySelector('.embedded-scope');

        if (!scope) return;
        
        // Switch between the two layout classes
        if (newPageSize === 'A3') {
            scope.classList.add('landscape');
            scope.parentElement.lastElementChild.classList.add('a3-page');
            scope.classList.remove('portrait');
            scope.parentElement.lastElementChild.classList.remove('a4-page');
        } else {
            scope.classList.remove('landscape');
            scope.parentElement.lastElementChild.classList.add('a4-page');
            scope.classList.add('portrait');
            scope.parentElement.lastElementChild.classList.remove('a3-page');
        }
    });
</script>
}
